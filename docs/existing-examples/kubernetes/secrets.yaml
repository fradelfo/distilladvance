# Kubernetes Secrets for Blog API
# Contains sensitive configuration data (base64 encoded)
# NOTE: In production, use sealed-secrets, external-secrets, or vault

apiVersion: v1
kind: Secret
metadata:
  name: blog-api-secrets
  namespace: blog-system
  labels:
    app.kubernetes.io/name: blog-api
    app.kubernetes.io/component: secrets
type: Opaque
data:
  # JWT Secrets (base64 encoded)
  # Generate with: echo -n "your-super-secret-jwt-key-change-in-production" | base64
  JWT_SECRET: eW91ci1zdXBlci1zZWNyZXQtand0LWtleS1jaGFuZ2UtaW4tcHJvZHVjdGlvbg==

  # Session Secret (base64 encoded)
  # Generate with: echo -n "your-super-secret-session-key-change-in-production" | base64
  SESSION_SECRET: eW91ci1zdXBlci1zZWNyZXQtc2Vzc2lvbi1rZXktY2hhbmdlLWluLXByb2R1Y3Rpb24=

  # SMTP Credentials (base64 encoded)
  # Generate with: echo -n "your-smtp-username" | base64
  SMTP_USER: eW91ci1zbXRwLXVzZXJuYW1l
  # Generate with: echo -n "your-smtp-password" | base64
  SMTP_PASS: eW91ci1zbXRwLXBhc3N3b3Jk

---
# Database Secrets
apiVersion: v1
kind: Secret
metadata:
  name: postgres-secrets
  namespace: blog-system
  labels:
    app.kubernetes.io/name: postgres
    app.kubernetes.io/component: secrets
type: Opaque
data:
  # Database password (base64 encoded)
  # Generate with: echo -n "your-secure-db-password" | base64
  POSTGRES_PASSWORD: eW91ci1zZWN1cmUtZGItcGFzc3dvcmQ=

  # Database URL (base64 encoded)
  # Generate with: echo -n "postgresql://postgres:your-secure-db-password@postgres-service:5432/blogdb" | base64
  DATABASE_URL: cG9zdGdyZXNxbDovL3Bvc3RncmVzOnlvdXItc2VjdXJlLWRiLXBhc3N3b3JkQHBvc3RncmVzLXNlcnZpY2U6NTQzMi9ibG9nZGI=

---
# Redis Secrets
apiVersion: v1
kind: Secret
metadata:
  name: redis-secrets
  namespace: blog-system
  labels:
    app.kubernetes.io/name: redis
    app.kubernetes.io/component: secrets
type: Opaque
data:
  # Redis password (base64 encoded)
  # Generate with: echo -n "your-secure-redis-password" | base64
  REDIS_PASSWORD: eW91ci1zZWN1cmUtcmVkaXMtcGFzc3dvcmQ=

  # Redis URL (base64 encoded)
  # Generate with: echo -n "redis://:your-secure-redis-password@redis-service:6379/0" | base64
  REDIS_URL: cmVkaXM6Ly86eW91ci1zZWN1cmUtcmVkaXMtcGFzc3dvcmRAcmVkaXMtc2VydmljZTo2Mzc5LzA=

---
# Monitoring Secrets
apiVersion: v1
kind: Secret
metadata:
  name: monitoring-secrets
  namespace: blog-system
  labels:
    app.kubernetes.io/name: monitoring
    app.kubernetes.io/component: secrets
type: Opaque
data:
  # Grafana admin credentials (base64 encoded)
  # Generate with: echo -n "admin" | base64
  GRAFANA_USER: YWRtaW4=
  # Generate with: echo -n "your-secure-grafana-password" | base64
  GRAFANA_PASSWORD: eW91ci1zZWN1cmUtZ3JhZmFuYS1wYXNzd29yZA==

---
# TLS Certificate Secret
apiVersion: v1
kind: Secret
metadata:
  name: blog-tls
  namespace: blog-system
  labels:
    app.kubernetes.io/name: blog-api
    app.kubernetes.io/component: tls
type: kubernetes.io/tls
data:
  # TLS certificate (base64 encoded PEM)
  # Replace with your actual certificate
  tls.crt: LS0tLS1CRUdJTi...
  # TLS private key (base64 encoded PEM)
  # Replace with your actual private key
  tls.key: LS0tLS1CRUdJTi...

---
# Image Pull Secrets (if using private registry)
apiVersion: v1
kind: Secret
metadata:
  name: regcred
  namespace: blog-system
  labels:
    app.kubernetes.io/name: blog-api
    app.kubernetes.io/component: image-pull
type: kubernetes.io/dockerconfigjson
data:
  # Docker registry credentials (base64 encoded)
  # Generate with: kubectl create secret docker-registry regcred --docker-server=your-registry --docker-username=your-username --docker-password=your-password --dry-run=client -o yaml
  .dockerconfigjson: eyJhdXRocyI6e...

---
# External Secret Operator Example (if using ESO)
# apiVersion: external-secrets.io/v1beta1
# kind: SecretStore
# metadata:
#   name: vault-backend
#   namespace: blog-system
# spec:
#   provider:
#     vault:
#       server: "https://vault.company.com"
#       path: "secret"
#       version: "v2"
#       auth:
#         kubernetes:
#           mountPath: "kubernetes"
#           role: "blog-api"

---
# External Secret for JWT Secret (ESO example)
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: blog-api-jwt-secret
#   namespace: blog-system
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     name: vault-backend
#     kind: SecretStore
#   target:
#     name: blog-api-secrets
#     creationPolicy: Owner
#   data:
#   - secretKey: JWT_SECRET
#     remoteRef:
#       key: blog-api
#       property: jwt_secret

---
# Sealed Secret Example (if using sealed-secrets)
# apiVersion: bitnami.com/v1alpha1
# kind: SealedSecret
# metadata:
#   name: blog-api-secrets
#   namespace: blog-system
# spec:
#   encryptedData:
#     JWT_SECRET: AgBy3i4OJSWK+PiTySYZZA9rO43cGDEQAx...
#   template:
#     metadata:
#       name: blog-api-secrets
#       namespace: blog-system
#     type: Opaque